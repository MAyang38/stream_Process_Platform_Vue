<template>
	<div id="lay-navbar">
		<el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" router>
      <el-menu-item index="/index" style="font-size: 28px; font-weight:bold">
				<img class="logo" src="../../assets/squirrel.png" />
        露天矿实时大数据流处理与展示平台
			</el-menu-item>



			<el-menu-item v-if="!user.name" index="/re-lo" style="float: right;">
				登录
				<el-divider direction="vertical"></el-divider>
				注册
			</el-menu-item>
      <el-submenu index="/" v-if="user.name" style="float: right;">
        <!--        <svg t="1650186255952" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3414" width="200" height="200"><path d="M586.945923 513.581008c55.067176-27.962865 92.91211-85.125773 92.91211-150.998039 0-93.338828-75.937506-169.276335-169.277358-169.276335s-169.275311 75.937506-169.275311 169.276335c0 65.872267 37.844933 123.034151 92.911086 150.998039-95.652524 32.016181-164.778904 122.45496-164.778904 228.743728 0 11.31572 9.17394 20.491707 20.491707 20.491707s20.491707-9.174963 20.491707-20.491707c0-110.36869 89.791026-200.160739 200.160739-200.160739S710.741413 631.956046 710.741413 742.324736c0 11.31572 9.17394 20.491707 20.491707 20.491707s20.491707-9.174963 20.491707-20.491707C751.723803 636.035968 682.598446 545.598212 586.945923 513.581008zM382.287753 362.582969c0-70.742181 57.552787-128.293945 128.292921-128.293945 70.742181 0 128.293945 57.552787 128.293945 128.293945 0 70.741157-57.552787 128.292921-128.293945 128.292921C439.84054 490.876913 382.287753 433.324126 382.287753 362.582969z" p-id="3415"></path><path d="M827.871087 196.127889C743.498468 111.757317 631.320573 65.290005 512 65.290005S280.500509 111.756293 196.128913 196.127889C111.756293 280.501532 65.291029 392.678404 65.291029 511.998977s46.465265 231.499491 130.837884 315.872111 196.550515 130.837884 315.871087 130.837884 231.498468-46.465265 315.871087-130.837884S958.708971 631.319549 958.708971 511.998977 912.243707 280.500509 827.871087 196.127889zM512 917.726581c-223.718271 0-405.726581-182.007287-405.726581-405.727605 0-223.718271 182.00831-405.726581 405.726581-405.726581s405.726581 182.007287 405.726581 405.726581C917.726581 735.719294 735.718271 917.726581 512 917.726581z" p-id="3416"></path></svg>-->
        <template slot="title">
          <svg t="1650186255952" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3414" width="200" height="200"><path d="M586.945923 513.581008c55.067176-27.962865 92.91211-85.125773 92.91211-150.998039 0-93.338828-75.937506-169.276335-169.277358-169.276335s-169.275311 75.937506-169.275311 169.276335c0 65.872267 37.844933 123.034151 92.911086 150.998039-95.652524 32.016181-164.778904 122.45496-164.778904 228.743728 0 11.31572 9.17394 20.491707 20.491707 20.491707s20.491707-9.174963 20.491707-20.491707c0-110.36869 89.791026-200.160739 200.160739-200.160739S710.741413 631.956046 710.741413 742.324736c0 11.31572 9.17394 20.491707 20.491707 20.491707s20.491707-9.174963 20.491707-20.491707C751.723803 636.035968 682.598446 545.598212 586.945923 513.581008zM382.287753 362.582969c0-70.742181 57.552787-128.293945 128.292921-128.293945 70.742181 0 128.293945 57.552787 128.293945 128.293945 0 70.741157-57.552787 128.292921-128.293945 128.292921C439.84054 490.876913 382.287753 433.324126 382.287753 362.582969z" p-id="3415"></path><path d="M827.871087 196.127889C743.498468 111.757317 631.320573 65.290005 512 65.290005S280.500509 111.756293 196.128913 196.127889C111.756293 280.501532 65.291029 392.678404 65.291029 511.998977s46.465265 231.499491 130.837884 315.872111 196.550515 130.837884 315.871087 130.837884 231.498468-46.465265 315.871087-130.837884S958.708971 631.319549 958.708971 511.998977 912.243707 280.500509 827.871087 196.127889zM512 917.726581c-223.718271 0-405.726581-182.007287-405.726581-405.727605 0-223.718271 182.00831-405.726581 405.726581-405.726581s405.726581 182.007287 405.726581 405.726581C917.726581 735.719294 735.718271 917.726581 512 917.726581z" p-id="3416"></path></svg>
          {{user.name}}</template>
        <el-menu-item @click="ToUserInfo">个人中心</el-menu-item>
        <el-menu-item @click="Logout">注销</el-menu-item>
      </el-submenu>

      <el-menu-item index="/about" style="float: right;">
        <svg t="1650186197879" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2593" width="200" height="200"><path d="M469.333333 597.333333v-85.333333h-42.666666v-85.333333h128v170.666666h42.666666v85.333334h-170.666666v-85.333334h42.666666z m42.666667 256c-187.733333 0-341.333333-153.6-341.333333-341.333333s153.6-341.333333 341.333333-341.333333 341.333333 153.6 341.333333 341.333333-153.6 341.333333-341.333333 341.333333z m0-85.333333c140.8 0 256-115.2 256-256s-115.2-256-256-256-256 115.2-256 256 115.2 256 256 256z m42.666667-469.333333v85.333333h-85.333334V298.666667h85.333334z" fill="#444444" p-id="2594"></path></svg>
        关于
      </el-menu-item>

      <el-menu-item index="/scoreCard" style="float: right;">
        <!--				<i class="el-icon-data-line"></i>-->
        <svg t="1650186059603" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2620" width="200" height="200"><path d="M167.183673 867.265306h483.265307c-20.897959-20.897959-39.183673-47.020408-52.244898-73.142857H167.183673c-52.244898 0-94.040816-41.795918-94.040816-94.040816V167.183673c0-52.244898 41.795918-94.040816 94.040816-94.040816H835.918367c52.244898 0 94.040816 41.795918 94.040817 94.040816v289.959184c28.734694 13.061224 52.244898 28.734694 73.142857 49.632653v-339.591837C1003.102041 75.755102 929.959184 0 835.918367 0H167.183673C75.755102 0 0 75.755102 0 167.183673v532.89796c0 91.428571 75.755102 167.183673 167.183673 167.183673zM867.265306 935.183673c-13.061224 2.612245-28.734694 5.22449-41.795918 5.22449-15.673469 0-31.346939-2.612245-44.408164-5.22449H36.571429c-20.897959 0-36.571429 15.673469-36.571429 36.571429s15.673469 36.571429 36.571429 36.571429H966.530612l-73.142857-73.142858h-26.122449z" fill="#211613" p-id="2621"></path><path d="M1118.040816 961.306122l-112.32653-112.32653c39.183673-41.795918 62.693878-96.653061 62.693877-159.346939 0-130.612245-104.489796-235.102041-235.102041-235.102041s-235.102041 104.489796-235.10204 235.102041 104.489796 235.102041 235.10204 235.102041c41.795918 0 80.979592-10.44898 114.938776-28.734694l117.55102 117.55102c7.836735 7.836735 15.673469 10.44898 26.122449 10.44898s18.285714-2.612245 26.122449-10.44898c15.673469-13.061224 15.673469-36.571429 0-52.244898zM671.346939 689.632653c0-88.816327 73.142857-161.959184 161.959183-161.959184s161.959184 73.142857 161.959184 161.959184-73.142857 161.959184-161.959184 161.959184-161.959184-73.142857-161.959183-161.959184zM287.346939 376.163265c62.693878 0 112.326531-49.632653 112.32653-112.32653S350.040816 151.510204 287.346939 151.510204s-112.326531 49.632653-112.326531 112.326531 49.632653 112.326531 112.326531 112.32653z m0-172.408163c33.959184 0 62.693878 28.734694 62.693877 62.693878s-28.734694 62.693878-62.693877 62.693877-62.693878-28.734694-62.693878-62.693877S253.387755 203.755102 287.346939 203.755102zM201.142857 480.653061h172.408163c13.061224 0 23.510204-10.44898 23.510204-23.510204s-10.44898-23.510204-23.510204-23.510204H201.142857c-13.061224 0-23.510204 10.44898-23.510204 23.510204s7.836735 23.510204 23.510204 23.510204z" fill="#211613" p-id="2622"></path><path d="M815.020408 334.367347v-2.612245-5.22449-2.612245s0-2.612245-2.612245-2.612245v-2.612244l-2.612245-2.612245-78.367347-70.530613c-10.44898-7.836735-26.122449-7.836735-33.959183 2.612245-7.836735 10.44898-7.836735 26.122449 2.612245 33.959184l28.734694 26.122449h-96.653062-2.612245s-2.612245 0-2.612244 2.612245c-2.612245 0-2.612245 2.612245-5.22449 2.612245l-253.387755 269.061224H201.142857c-13.061224 0-23.510204 10.44898-23.510204 23.510204s10.44898 23.510204 23.510204 23.510204h172.408163c7.836735 0 13.061224-2.612245 18.285715-7.836734l253.387755-269.061225h73.142857l-20.897959 18.285715c-10.44898 7.836735-13.061224 23.510204-5.22449 33.959183 5.22449 5.22449 13.061224 10.44898 18.285714 10.44898 5.22449 0 10.44898-2.612245 15.67347-5.22449l78.367347-60.081633 2.612244-2.612245s0-2.612245 2.612245-2.612244l2.612245-2.612245V339.591837v-2.612245c2.612245 2.612245 2.612245 0 2.612245-2.612245 0 2.612245 0 0 0 0z" fill="#211613" p-id="2623"></path></svg>
        车辆信息
      </el-menu-item>

      <el-menu-item index="/challenges" style="float: right;">
        <!--				<i class="el-icon-s-flag"></i>-->
        <svg t="1650115696272" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2610" width="200" height="200"><path d="M1024.00324 767.1c0.5 71.1-57 128.9-128 128.9-55.7 0-103.1-35.6-120.7-85.3-2.3-6.4-8.3-10.7-15.1-10.7H208.00324c-42.5 0-82.6-16.7-113-47-30.3-30.3-47-70.4-47-113s16.7-82.6 47-113c30.3-30.3 70.5-47 113-47h576c53.3 0 96.5-43.6 96-97-0.5-52.8-44.4-95-97.2-95h-519c-6.8 0-12.8 4.3-15.1 10.7-17.6 49.7-65 85.3-120.7 85.3C57.00324 384-0.49676 326.2 0.00324 255.1 0.50324 184.6 59.90324 126.7 130.40324 128c54.7 1 101.1 36.4 118.4 85.4 2.2 6.4 8.3 10.6 15 10.6H784.00324c42.5 0 82.6 16.7 113 47 30.3 30.3 47 70.5 47 113s-16.7 82.6-47 113c-30.3 30.3-70.5 47-113 47H208.00324c-53.3 0-96.5 43.6-96 97 0.5 52.8 44.4 95 97.2 95h551c6.7 0 12.8-4.2 15-10.6 17.3-49.1 63.6-84.4 118.4-85.4 70.5-1.3 129.9 56.6 130.4 127.1z" p-id="2611"></path></svg>
        GPS轨迹数据
      </el-menu-item>




		</el-menu>
	</div>
</template>

<script>
	// const {
	// 	indexPath,
	// 	challengesPath,
	// 	aboutPath,
	// 	registerPath,
	// 	loginPath
	// } = this.$store.state.routerPathSettings
	export default {
		name: 'LayNavbar',
		data: () => {
			return {
				activeIndex: '/',
			}
		},
		methods: {
			ToUserInfo: function(){
				this.$router.push({path:'/userInfo', query:{'uid':this.$store.state.user.uid}})
			},
			
			Logout: function() {
        this.$store.dispatch('Userinfo/setloginFlag', 0);
        this.$store.state.Userinfo.loginflag = 0;
        localStorage.clear();
				this.$store.state.user = {};
        this.$router.push({path:'/re-lo'});
			}
		},
		created: function() {
      console.log(JSON.parse(localStorage.getItem("loginname")));

      this.$store.state.user = localStorage.getItem("loginname")!==null?JSON.parse(localStorage.getItem("loginname")):{};
			this.$data.activeIndex = this.$route.path;
		},
		computed: {
			user: function() {
        // let user = localStorage.getItem("loginname");
        // return localStorage.getItem("loginname");
        console.log(this.$store.state.user);
				return this.$store.state.user;

      }
		},
		watch: {
			$route(to, from) {
				this.$data.activeIndex = to.path;
			}
		},
	}
</script>

<style scoped>
	.logo {
		max-height: 25px;
	}
  svg {
    width: 1.6rem;
    height: 1.6rem;
    /*fill: #b0b0b2;*/
  }

</style>
